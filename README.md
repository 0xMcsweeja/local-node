# Ethereum Full Node Stack
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„  â”‚
      â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ â”‚
      â”‚ â–ˆâ–ˆâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â–ˆâ–ˆâ–ˆ â”‚
      â”‚ â–ˆâ–ˆâ”‚                                      â”‚â–ˆâ–ˆâ–ˆ â”‚
      â”‚ â–ˆâ–ˆâ”‚  Îž ðŸŸ¢ ETHEREUM MAINNET NODE  Îž  ðŸŸ¢  â”‚â–ˆâ–ˆâ–ˆ â”‚
      â”‚ â–ˆâ–ˆâ”‚                                      â”‚â–ˆâ–ˆâ–ˆ â”‚
      â”‚ â–ˆâ–ˆâ”‚  Â» Status   : SYNCED                 â”‚â–ˆâ–ˆâ–ˆ â”‚
      â”‚ â–ˆâ–ˆâ”‚  Â» Client   : GETH + LIGHTHOUSE      â”‚â–ˆâ–ˆâ–ˆ â”‚
      â”‚ â–ˆâ–ˆâ”‚  Â» Mode     : FULL / BEACON          â”‚â–ˆâ–ˆâ–ˆ â”‚
      â”‚ â–ˆâ–ˆâ”‚  Â» RPC      : ENABLED (localhost)    â”‚â–ˆâ–ˆâ–ˆ â”‚
      â”‚ â–ˆâ–ˆâ”‚  Â» P2P      : 30303 TCP/UDP          â”‚â–ˆâ–ˆâ–ˆ â”‚
      â”‚ â–ˆâ–ˆâ”‚                                      â”‚â–ˆâ–ˆâ–ˆ â”‚
      â”‚ â–ˆâ–ˆâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â–ˆâ–ˆâ–ˆ â”‚
      â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ â”‚
      â”‚ â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚â”€â”€â”€[ðŸŒ NODE INFO]
               â”‚     â”œâ”€ Network ID  : 1 (Mainnet)
               â”‚     â””â”€ Sync Mode   : Snap
               â”‚
               â”‚â”€â”€â”€[ðŸ›°ï¸ CONNECTIONS]
               â”‚     â”œâ”€ Peers       : x active
               â”‚     â”œâ”€ Latency     : x ms avg
               â”‚     â””â”€ Region      : AU-East
               â”‚
               â””â”€â”€â”€[ðŸ› ï¸ TOOLCHAIN]
                     â”œâ”€ Docker Compose / WSL2
                     â”œâ”€ Monitoring via Prometheus
                     â””â”€ Grafana Dashboards Enabled

A minimal, production-ready Ethereum node setup using Docker Compose. Combines Geth (EL) and Lighthouse (CL) for a complete post-merge node.

> Tested on Windows 10 Home with WSL 2 (Ubuntu 22.04) and Docker Desktop 4.30

## Components

Post-merge Ethereum requires two client layers working together:

- **Execution Layer** (Geth): Handles state, transactions, and RPC
- **Consensus Layer** (Lighthouse): Manages consensus and block finality

Running both gives you sovereign access to the network without trusting third parties.

## Hardware Requirements

- 300+ GB fast SSD storage
- 8+ GB RAM (12+ GB recommended)
- Stable internet connection

## Quick Start

```bash
# Clone and set up
git clone https://github.com/<your-handle>/ethereum-node-stack.git
cd ethereum-node-stack
cp .env.example .env

# Generate JWT secret for client authentication
./scripts/gen-jwt-secret.sh  # On Windows: use scripts\gen-jwt-secret.sh

# Launch the stack
docker compose pull
docker compose up -d

# Watch the sync progress
docker compose logs -f
```

First sync requires ~112 GB (100 GB Geth + 12 GB Lighthouse). Plan accordingly.

## Key Components

- **docker-compose.yml**: Orchestrates both clients with proper networking
- **.env**: Controls client versions and port mappings
- **scripts/**: Contains maintenance utilities:
  - `gen-jwt-secret.sh`: Creates authentication token
  - `prune-geth.sh`: Reduces Geth's disk usage
  - `backup.sh`: Creates archives of chain data

Make scripts executable:
- On Linux/macOS: `chmod +x scripts/*.sh`
- On Windows: `icacls scripts\*.sh /grant Everyone:RX`

## Maintenance

Common tasks to keep your node healthy:

```bash
# Check sync status
curl -X POST http://localhost:8545 -H "Content-Type: application/json" \
     --data '{"jsonrpc":"2.0","method":"eth_syncing","params":[],"id":1}'

# Prune Geth to save disk space (run weekly)
./scripts/prune-geth.sh

# Create full backup (offline process)
./scripts/backup.sh
```

## Windows Setup

1. Enable virtualization in BIOS
2. Install WSL 2 via PowerShell (as admin):
   ```powershell
   wsl --install -d Ubuntu-22.04
   ```
3. Install Docker Desktop with WSL 2 integration
4. Configure WSL resources in `%UserProfile%\.wslconfig`:
   ```ini
   [wsl2]
   memory=12GB
   processors=8
   ```

## Troubleshooting

| Issue | Solution |
|-------|----------|
| Docker won't start | Check disk space (`df -h`), need 300+ GB |
| Authentication errors | Verify `jwtsecret/jwt.hex` permissions |
| Slow sync | Check internet connection and other bandwidth usage |
| Memory errors | Increase allocation in `.wslconfig` |
| Client connection issues | Ensure Geth is running before Lighthouse |
| High disk usage | Run `./scripts/prune-geth.sh` |

## References

* [Geth Documentation](https://geth.ethereum.org/docs)
* [Lighthouse Documentation](https://lighthouse-book.sigmaprime.io/)
* [Ethereum Node Requirements](https://ethereum.org/en/run-a-node/)

## License

MIT

